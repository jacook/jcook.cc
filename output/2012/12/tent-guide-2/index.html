<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Jacob Cook - Tent Guide #2: Using TentStatus as a Client</title>

    <meta name="author" content="Jacob Cook" />
    <meta name="description" content="Personal website and blog for Jacob Cook" />

    <link rel="alternate" type="application/rss+xml" href="/atom.xml" />

    <link rel="stylesheet" href="/css/style-main.css" type="text/css" media="screen, projection" />
    <link rel="stylesheet" href="/css/style-pyg.css" type="text/css" />
    <link media="only screen and (max-device-width: 480px)" href="/css/style-mobile.css" type="text/css" rel="stylesheet" />
    <link media="only screen and (device-width: 768px)" href="/css/style-mobile.css" type="text/css" rel="stylesheet" />
    <link href='http://fonts.googleapis.com/css?family=Merriweather' rel='stylesheet' type='text/css'>

    <script type="text/javascript" src="/js/jquery.js"></script>

<script type="text/javascript">
// scroll-to-top button show and hide
jQuery(document).ready(function(){
    jQuery(window).scroll(function(){
        if (jQuery(this).scrollTop() > 100) {
            jQuery('.scrollup').fadeIn();
        } else {
            jQuery('.scrollup').fadeOut();
    }
});
// scroll-to-top animate
jQuery('.scrollup').click(function(){
    jQuery("html, body").animate({ scrollTop: 0 }, 600);
        return false;
    });
});
</script>

</head>

<body>
  <section class="sidebar">
    <a href="/">
      <img src="https://jcook.cc/img/avatar-red.jpg" height="75" width="75" class="avatar" />
    </a>

    <section class="name">  
      <a href="/">Jacob</a><br />
      <a href="/">Cook</a>
    </section>

    <section class="meta">
      <a href="javascript:void(0);" onclick="javascript:window.prompt ('Use the following Tent entity to \'follow\' me in your Tent feed.\nIf you don\'t know what Tent is, find out more at https\:\/\/tent.io.', 'https\:\/\/jcook.cc');"><img src="/img/tent.png" /></a>
      <a href="https://github.com/jacook" target="_blank"><img src="/img/github.png" /></a>
      <a href="https://twitter.com/jcookcc" target="_blank"><img src="/img/twitter.png" /></a>
      <script type="text/javascript" language="javascript">
      <!--
      // Email obfuscator script 2.1 by Tim Williams, University of Arizona
      // Random encryption key feature by Andrew Moulden, Site Engineering Ltd
      // This code is freeware provided these four comment lines remain intact
      // A wizard to generate this code is at http://www.jottings.com/obfuscator/
      { coded = "8LhrW@8hrrj.hh"
        key = "wLmC9P5hZ1TkSqJlFnN4RgpoAjDEV7BHybY6ir08O2GefKQWuaXMtUzcsdxI3v"
        shift=coded.length
        link=""
        for (i=0; i<coded.length; i++) {
          if (key.indexOf(coded.charAt(i))==-1) {
            ltr = coded.charAt(i)
            link += (ltr)
          }
          else {     
            ltr = (key.indexOf(coded.charAt(i))-shift+key.length) % key.length
            link += (key.charAt(ltr))
          }
        }
      document.write("<a href='mailto:"+link+"'><img src='/img/email.png' /></a>")
      }
    //-->
    </script><noscript></noscript>
      <a href="/feed/atom.xml"><img src="/img/rss.png" /></a>
    </section>

    <section class="nav">
      <ul>
        <li><a href='/about/'>About</a></li>
        <li><a href='/projects/'>Projects</a></li>
        <li><a href='/archive/'>Blog Archive</a></li>
      </ul>
    </section>
  </section>

  
<section class="content">
  <h1>Tent Guide #2: Using TentStatus as a Client</h1>

  <section class="byline">
  <p>Posted 18 December 2012 on <a href="/tags/tent" rel="tag">tent</a>, <a href="/tags/social networking" rel="tag">social networking</a>, <a href="/tags/howto" rel="tag">howto</a>, <a href="/tags/decentralization" rel="tag">decentralization</a>, <a href="/tags/tech" rel="tag">tech</a>, <a href="/tags/server" rel="tag">server</a></p> 
  </section>

  <p>Once you have your self-hosted Tent server installed, you will need a way to interact with it – to send and receive messages, to add new followers and to view others’ profiles. The most useful (and universal) client available at this point is called TentStatus. TentStatus was developed by the tent.io team to provide a quick-start way for developers to start using Tent. We will set up an installation of TentStatus on our locally-managed server to provide us with individual access to all things Tent.</p>

<!-- more -->

<p>My usual Tent disclaimer: <strong>This guide is NOT foolproof by any means and your results may vary based on architecture or the Git commit you are working from.</strong> Remember to visit <a href="http://tent.io">tent.io</a> or the <a href="https://github.com/tent/tent-status">GitHub repository</a> if you have any questions regarding getting your server up and running. As the software is still very experimental, don’t get discouraged if you can’t figure things out on your first go. There are a few resources from other experienced users here and there on the web if your Google-fu is strong enough.</p>

<h2 id="running-tentstatus-on-a-separate-computer-from-your-tentd-server">Running TentStatus on a separate computer from your Tentd server</h2>

<p>If you are running TentStatus on the same computer as your Tentd server, you won’t need to install the packages or reconfigure PostgreSQL, so you can skip down to the “Installing TentStatus” section. If it is a new computer, start right here.</p>

<p><strong>Ubuntu Only:</strong> Make sure the following packages are installed:</p>

<pre class="highlight"><code class="language-bash">sudo apt-get install git ruby1.9.1-full libxml2 libxml2-dev libxslt1-dev build-essential postgresql-server-dev-all
sudo gem install bundler</code></pre>

<p><strong>Arch Only:</strong> Install <a href="https://aur.archlinux.org/packages/tent-status-git/">tent-status-git from the AUR</a>. It will install to /var/lib/tent-status.
(If you are running Arch, you will need to add “~/.gem/ruby/1.9.1/bin” to your PATH environment variable so you can run the gem binaries.)</p>

<p>On Arch, we need to initialize the database and start up the PostgreSQL server, since it is not done for us automatically. Run the following commands to do so.</p>

<pre class="highlight"><code class="language-bash">sudo mkdir /var/lib/postgres/data
sudo chown -c postgres:postgres /var/lib/postgres/data
sudo initdb -D <span class="s1">'/var/lib/postgres/data'</span>
sudo systemctl start postgresql
sudo systemctl <span class="nb">enable </span>postgresql</code></pre>

<p><strong>Ubuntu and Arch:</strong> We need to configure PostgreSQL’s default admin user and assign it a password for security purposes.</p>

<pre class="highlight"><code class="language-bash">sudo -u postgres psql postgres
<span class="se">\p</span>assword postgres</code></pre>

<p>It will ask you to set a password. Enter \d to exit this prompt when you are done.</p>

<p>Now we will create a username and password with which we will access the server’s profile configuration and other tools. It’s often easiest to make the username the same as what your Linux user is on your server. That way you won’t have to change the user via su whenever you need to start up the database.</p>

<pre class="highlight"><code class="language-bash">sudo -u postgres createuser <span class="nv">$USERNAME</span></code></pre>

<h2 id="installing-tentstatus">Installing TentStatus</h2>

<p><strong>Ubuntu Only:</strong> We will use Git to install the newest copy of source available for our server. Go to a location on your drive that you want your server to be based on, and that you have write access to.</p>

<pre class="highlight"><code class="language-bash">git clone https://github.com/tent/tent-status.git tent-status
<span class="nb">cd </span>tent-status</code></pre>

<p>Now we will install and compile the various services needed to make TentStatus run.</p>

<pre class="highlight"><code class="language-bash">bundle install</code></pre>

<p>You may experience some errors here, but usually they are accompanied by enough information to deduce the source of the problem. As of now this process works with current versions of Ubuntu 12.04, as long as you have followed the steps in this order.</p>

<p><strong>Ubuntu and Arch:</strong> Create a new TentStatus database and initialize it.</p>

<pre class="highlight"><code class="language-bash">createdb tent_status</code></pre>

<p>The following line starts up our TentStatus implementation:</p>

<pre class="highlight"><code class="language-bash"><span class="nv">DATABASE_URL</span><span class="o">=</span>postgres://<span class="nv">$USERNAME</span>:<span class="nv">$PASSWORD</span>@localhost/tent_status <span class="nv">APP_NAME</span><span class="o">=</span><span class="s1">'TentStatus Standalone'</span> <span class="nv">COOKIE_SECRET</span><span class="o">=</span>abc bundle <span class="nb">exec </span>puma -p 3001</code></pre>

<p>Once you’ve run the above, you should see a confirmation that your server is listening for requests at http://0.0.0.0:3001. Open up a web browser and enter go to http://localhost:3001. If you are on a remote computer, use the server’s IP address instead of localhost. If you see a “TentStatus Standalone” page asking you for an entity, then your TentStatus implementation is operational. Note that TentStatus operates like a server, so you will need to keep the above line running on your system somehow in order to continuously have the app available. OR you can set up Puma to run in a screen by first exporting the environment variables:</p>

<pre class="highlight"><code class="language-bash"><span class="nb">export </span><span class="nv">DATABASE_URL</span><span class="o">=</span>postgres://<span class="nv">$USERNAME</span>:<span class="nv">$PASSWORD</span>@localhost/tent_server 
<span class="nb">export </span><span class="nv">ADMIN_USERNAME</span><span class="o">=</span><span class="nv">$USERNAME</span> 
<span class="nb">export </span><span class="nv">ADMIN_PASSWORD</span><span class="o">=</span><span class="nv">$PASSWORD</span>
screen bundle <span class="nb">exec </span>puma -p 3000</code></pre>

<p><img src="/img/20121218002.png" alt=""></p>

<p>Enter your Tentd server’s URI into the box, then enter the username and password of your server’s database. You will be asked to authorize your connection. Once you do, you will have full access to your Tent server.</p>

<p>TentStatus functions much like Twitter, and is fairly intuitive if you’ve ever used a social network. It can be used to send short 256-character messages to other users. Mentions come in the form of “^” as opposed to Twitter’s “@”, so if you wish to mention a user, just type ^https://example.com and the post will be forwarded to their Mentions box. Followers can be added via the “Following” button in the dropdown menu of the upper left-hand side. From TentStatus you can also repost other people’s posts that appear in your feed, or you can reply to them just like Twitter’s reply function.</p>

<p>And just like that, you are using Tent! Give it a “Hello World” and enjoy your hard work.</p>

<hr><p>The final guide in this series will explain some of the clients and services that use Tent on various platforms.</p>

  <section class="meta">
    
      <h3>Related Articles</h3>
        <ul class="archlist">
            
            <li>
            <a href="/2012/12/tent-guide-2/">Tent Guide #2: Using TentStatus as a Client</a>
            <span class="date">December 18</span>
            </li>
            
            <li>
            <a href="/2012/12/tent-guide-1/">Tent Guide #1: Setting Up a Tent Server</a>
            <span class="date">December 9</span>
            </li>
            
            <li>
            <a href="/2012/12/tent/">Tent: Take Back Your Social Network</a>
            <span class="date">December 9</span>
            </li>
            
        </ul>
    
    <h3>Comments</h3>
    <section class="foot">
      <a href="https://twitter.com/jcookcc" target="_blank">
        <img src="https://jcook.cc/img/avatar-red.jpg" height="50" width="50" />
      </a>

      <p>
        If you have any input on this or any other article you see on the site, I'd love to hear it. <a href="https://twitter.com/jcookcc" target="_blank">Drop me a line on Twitter</a>, via my <a href="javascript:void(0);" onclick="javascript:window.prompt ('Use the following Tent entity to \'follow\' me in your Tent feed.\nIf you don\'t know what Tent is, find out more at https\:\/\/tent.io.', 'https\:\/\/jcook.cc');">Tent entity</a>, or even <a href="/contact">send me an email</a>.
      </p>

    </section>
  </section>
</section>

  
  <a href="#" class="scrollup">Scroll</a>
  <section class="colourbar">
  </section>
  </body>
</html>

